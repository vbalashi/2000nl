# Ralph Progress Log
Started: di 10 feb 2026 10:00:23 CET

## Codebase Patterns
- For session-scoped state that must not trigger renders (e.g., "already reviewed this session"), use `useRef(new Set())` and clear it via `useEffect` on session boundary changes (list/scenario/mode) plus an unmount cleanup.
---

## 2026-02-10 10:03:29 CET - US-094.1
- Added `reviewedInSessionRef` (a `useRef<Set<string>>`) to track word IDs reviewed in the current training session.
- In `handleAction`, added the current word ID to the set before presenting a prefetched next card (so instant transitions still mark the reviewed card).
- Cleared the set on session boundary changes (list selection or scenario/mode changes) and on component unmount.
- UI verification skipped (not necessary for this change; covered by `npx tsc --noEmit` + `npx vitest run`).
- Files changed: `apps/ui/components/training/TrainingScreen.tsx`, `ralph/prd.json`, `ralph/progress.txt`
- **Learnings for future iterations:**
  - If a piece of state is needed across async flows but should not participate in render, keep it in a ref and explicitly reset it on boundary changes.
---
