{
  "project": "2000nl",
  "branchName": "ralph/audio-fix-pwa-onboarding-prep",
  "description": "Sprint 09: Fix critical audio 404 errors on localhost and NUC, research PWA implementation complexity, and plan user onboarding feature. CRITICAL: Code changes ONLY on dev machine, NUC is for Docker/nginx config investigation only.",
  "userStories": [
    {
      "id": "US-041-1",
      "title": "Investigate audio file structure and paths",
      "description": "As a developer, I need to understand where audio files are located and how paths are generated in the codebase so that I can identify the root cause of 404 errors.",
      "acceptanceCriteria": [
        "Document audio file locations on localhost dev machine (/home/khrustal/dev/2000nl-ui/public/audio/)",
        "SSH to NUC and check Docker services in /srv/ (actual running containers)",
        "Check /home/khrustal/dev/nuc/ for configs and AGENTS.md (service overview)",
        "Document audio file locations on NUC (inside Docker container)",
        "Identify where audio paths are generated in TrainingScreen.tsx:1052-1053",
        "Identify where audio paths are generated in InteractiveText.tsx",
        "Document path generation patterns (relative vs absolute, domain prefixes)",
        "List which audio types fail where (word audio on localhost, sentence audio on NUC)",
        "Create investigation notes document with findings"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-041-2",
      "title": "Verify Docker volume configuration on NUC",
      "description": "As a developer, I need to verify Docker volume mounts are correctly configured on the NUC server so that audio files are accessible to the Next.js container. This is investigation ONLY - no code changes on NUC.",
      "acceptanceCriteria": [
        "SSH to NUC using 'ssh nuc' (key-based auth)",
        "Check AGENTS.md in /home/khrustal/dev/nuc/ for service overview",
        "Find 2000nl service configuration in /home/khrustal/dev/nuc/ directory structure",
        "Check actual running Docker containers in /srv/ (use 'docker ps | grep 2000nl')",
        "Read docker-compose.yml for volume mount configuration",
        "Use 'docker exec -it [container] ls -la /app/public/audio/' to verify files inside container",
        "Check if word audio directory (/app/public/audio/nl/) exists and has files in container",
        "Check if sentence (TTS) audio directory (/app/public/audio/tts/) exists and has files in container",
        "Document volume mount configuration and any mismatches between host and container",
        "CRITICAL: Investigation only - do NOT modify any code on NUC"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-041-3",
      "title": "Compare static file serving between dev and prod",
      "description": "As a developer, I need to understand how Next.js serves static files in development vs production so that I can identify why audio works inconsistently.",
      "acceptanceCriteria": [
        "Check next.config.js on dev machine for static file serving configuration",
        "Document public directory serving in dev mode (next dev)",
        "Document public directory serving in prod mode (next build + next start)",
        "Check if nginx is proxying requests on NUC (/etc/nginx/sites-available/2000nl)",
        "Document nginx location blocks for /audio/ paths if applicable",
        "Identify differences between localhost:3000 serving and NUC serving",
        "Document findings on what works where (word audio works on NUC, sentence audio works on localhost)",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-041-4",
      "title": "Fix audio path generation and configuration",
      "description": "As a developer, I need to fix the identified audio serving issues so that both word and sentence audio play correctly in all environments. Code changes ONLY on dev machine.",
      "acceptanceCriteria": [
        "Apply fix based on investigation findings (Docker volumes, static paths, or nginx config)",
        "If Docker volume issue: Update docker-compose.yml on NUC with correct mounts (config only, no code)",
        "If path generation issue: Fix path constants in TrainingScreen.tsx and InteractiveText.tsx on DEV MACHINE ONLY",
        "If nginx issue: Update nginx configuration on NUC for /audio/ location block (config only, no code)",
        "CRITICAL: All TypeScript/React code changes happen on /home/khrustal/dev/2000nl-ui/ only",
        "Restart services after configuration changes if needed",
        "Test word audio on localhost:3000 using Chrome DevTools MCP",
        "Test sentence audio on http://2000.nuc using Chrome DevTools MCP",
        "Verify no 404 errors in browser console for audio requests",
        "Test with multiple words and sentences in both environments",
        "Document root cause and fix applied in investigation notes",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-PWA-RESEARCH",
      "title": "Assess PWA implementation complexity",
      "description": "As a product owner, I need to understand the complexity and requirements of implementing PWA support so that I can prioritize it on the roadmap and plan implementation.",
      "acceptanceCriteria": [
        "Research PWA fundamentals (manifest.json, service worker, offline capabilities)",
        "Evaluate next-pwa package for App Router compatibility",
        "Analyze 2000nl-specific offline requirements (word data, API endpoints, static assets)",
        "Design offline caching strategy for word training",
        "Assess implementation complexity: simple config (1-2 days) vs complex refactoring (5+ days)",
        "Estimate story points for full PWA implementation with breakdown by phase",
        "Identify risks and blockers (authentication, API structure, browser compatibility)",
        "Create assessment document at 01_Projects/10_2000nl/01_10_10_Development/PWA-Implementation-Assessment.md",
        "Document recommendation: proceed/defer, when, and estimated effort",
        "Assessment document includes executive summary, requirements, implementation plan, and risks"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-048-PREP",
      "title": "Design user onboarding flow and implementation plan",
      "description": "As a product owner, I need a comprehensive onboarding design and implementation plan so that Sprint 10 can execute efficiently with clear requirements and approach.",
      "acceptanceCriteria": [
        "Research onboarding UX patterns from SRS apps (Anki, Duolingo, language learning apps)",
        "Evaluate onboarding libraries (react-joyride, shepherd.js, intro.js, custom modal)",
        "Select library with clear rationale (bundle size, mobile support, implementation complexity)",
        "Design complete onboarding flow with 5-7 steps maximum",
        "Write full copy for each onboarding step (not placeholders)",
        "Identify UI elements to highlight in each step",
        "Plan localStorage flag mechanism (onboarding_completed)",
        "Design restart tutorial option for settings page",
        "Document mobile vs desktop differences",
        "Estimate story points for Sprint 10 implementation (7-8 points expected)",
        "Create implementation plan at 01_Projects/10_2000nl/01_10_10_Development/Onboarding-Implementation-Plan.md",
        "Plan document includes: UX flow, library selection, technical approach, full copy, implementation estimate",
        "Sprint 10 ready-to-implement checklist prepared"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
